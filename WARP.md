# WARP.md

This file provides guidance to WARP (warp.dev) when working with code in this repository.

## Project Overview

This is an HTML5 Pomodoro timer application built entirely using AI-generated code. It's a single-page web application with vanilla JavaScript, Bootstrap 5 for UI components, and custom CSS animations.

## Architecture

### Core Components

The application follows a simple client-side architecture:

- **index.html**: Main HTML structure with Bootstrap modal for settings
- **js/script.js**: Core timer logic handling state management, localStorage persistence, and audio playback
- **css/styles.css**: Custom styling with animations and dark theme

### Key Technical Decisions

1. **Time Management**: Uses high-precision timing with `Date.now()` to handle browser tab inactivity and prevent timer drift
2. **State Persistence**: Timer state persists across page refreshes using localStorage
3. **Audio System**: Dual-format audio (MP3/OGG) with preloading for cross-browser compatibility
4. **No Build Process**: Pure vanilla JavaScript with CDN-loaded Bootstrap - no compilation required

## Development Commands

### Running the Application
```powershell
# Open in default browser (Windows)
Start-Process index.html

# Or use any local server
python -m http.server 8000
# Then navigate to http://localhost:8000
```

### Version Control
```powershell
# View recent changes
git --no-pager log --oneline -10

# Check current status
git status

# View diffs
git --no-pager diff
```

## Code Structure Details

### Timer State Management
The timer maintains several state variables that work together:
- `isRunning`: Controls timer execution
- `isWorkTime`: Distinguishes between work and break periods  
- `isLongBreak`: Tracks long break periods after 4 Pomodoros
- `timeLeft`: Remaining seconds in current period
- `cyclesCompleted`: Number of completed Pomodoros

### localStorage Keys
The app uses these localStorage keys for persistence:
- `pomodoroEndTime`: Stores when current timer should complete
- `pomodoroCurrentMode`: Current mode (work/break)
- `pomodoroCycles`: Number of completed cycles
- `pomodoroIsLongBreak`: Long break flag
- `pomodoroTargetCycles`: User's target number of Pomodoros
- `workDuration`, `breakDuration`, `longBreakDuration`: User preferences

### Audio Files
Located in `sounds/` directory:
- `work-start.mp3/.ogg`: Plays when work period begins
- `break-start.mp3/.ogg`: Plays when regular break begins
- `long-break-start.mp3/.ogg`: Plays when long break begins

## Current Known Issues

Based on README.md version 0.29:
- Paused message doesn't disappear when timer is unpaused
- Modal styling needs improvement (basic, not attractive)
- Settings interface layout not finalized
- Mobile interface needs fine-tuning

## Development Philosophy

This project follows an AI-first development approach where all code is generated by AI models. When making changes:
1. Maintain the existing vanilla JavaScript approach - no frameworks
2. Preserve the single-file structure for HTML/CSS/JS
3. Test timer accuracy especially around browser tab switching
4. Ensure audio compatibility across browsers

## Testing Considerations

When testing changes:
- Verify timer continues accurately when browser tab is inactive
- Test pause/resume functionality maintains correct time
- Confirm localStorage persistence across page refreshes
- Check audio playback in different browsers
- Test with shortened durations (currently set to 15 seconds for testing)
